<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulário de Matrícula • Academia Infinity</title>

  <!-- CSS do formulário -->
  <link rel="stylesheet" href="/painel/css/matriculas.css">
</head>
<body>
  <main class="page">
    <header class="header">
      <!-- o arquivo já está em /root/apps/painel/public/media/LOGO INFINITY.png -->
      <img class="logo" src="/painel/media/LOGO%20INFINITY.png" alt="Academia Infinity" />
      <h1 class="title">Formulário de Matrícula</h1>
    </header>

    <section class="card">
      <form class="form" method="post" action="<%= webhookUrl %>">
        <div class="grid">
          <!-- Nome Completo -->
          <label class="field full">
            <span>Nome completo<span class="req">*</span></span>
            <input type="text" name="nome_completo" id="nome_completo" required>
          </label>

          <!-- Endereço -->
          <label class="field">
            <span>Endereço<span class="req">*</span></span>
            <input type="text" name="endereco" id="endereco" required>
          </label>

          <!-- CEP -->
          <label class="field">
            <span>CEP<span class="req">*</span></span>
            <input id="cep" type="text" name="cep" inputmode="numeric" maxlength="9" required>
          </label>

          <!-- CPF -->
          <label class="field">
            <span>CPF<span class="req">*</span></span>
            <input id="cpf" type="text" name="cpf" inputmode="numeric" maxlength="14" required>
          </label>

          <!-- WhatsApp: +55 fixo com máscara ao digitar  -->
          <label class="field">
            <span>WhatsApp<span class="req">*</span></span>

            <div class="input-prefix">
              <span class="prefix">+55</span>
              <!-- usuário digita só DDD+telefone -->
              <input id="whatsapp_local" type="text" inputmode="numeric" autocomplete="tel"
                    placeholder="(42) 9156-2180" maxlength="16" required>
            </div>

            <!-- este hidden é enviado ao n8n normalizado -->
            <input id="whatsapp" name="whatsapp" type="hidden">
            <small class="hint">Digite apenas DDD e número; +55 é fixo.</small>
          </label>

          <!-- Data de nascimento -->
          <label class="field">
            <span>Data de nascimento<span class="req">*</span></span>
            <input id="data_nascimento" type="text" name="data_nascimento" placeholder="dd/mm/aaaa" maxlength="10" required>
          </label>

          <!-- Plano -->
          <label class="field">
            <span>Plano<span class="req">*</span></span>
            <select name="plano" id="plano" required>
              <option>Mensal (R$ 140)</option>
              <option>Trimestral (R$ 390)</option>
              <option>Semestral (R$ 720)</option>
            </select>
          </label>

          <!-- Objetivo: checkboxes com box clicável -->
          <fieldset class="field full">
            <legend>Objetivo</legend>
            <div class="checks" id="objetivos">
              <label><input type="checkbox" name="objetivo[]" value="Hipertrofia"><span>Hipertrofia</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Perda de peso / emagrecimento"><span>Perda de peso / emagrecimento</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Condicionamento físico geral"><span>Condicionamento físico geral</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Definição corporal / estética"><span>Definição corporal / estética</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Saúde e prevenção de doenças"><span>Saúde e prevenção de doenças</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Qualidade de vida"><span>Qualidade de vida</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Performance esportiva"><span>Performance esportiva</span></label>
              <label><input type="checkbox" name="objetivo[]" value="Outro"><span>Outro</span></label>
            </div>
          </fieldset>

          <!-- Por onde conheceu (opcional) -->
          <label class="field full">
            <span>Por onde conheceu a academia Infinity?</span>
            <textarea name="origem" id="origem" rows="3" placeholder="Instagram, amigo, panfleto, etc."></textarea>
          </label>
        </div>

        <div class="actions">
          <button class="btn" type="submit">Enviar</button>
        </div>
      </form>
    </section>
  </main>

  <!-- Modal de confirmação -->
  <div class="modal-overlay" id="confirmOverlay" hidden>
    <div class="modal">
      <h2 class="modal-title">Confirmar envio</h2>
      <p class="modal-sub">Confira os dados antes de enviar:</p>

      <ul class="confirm-list">
        <li><strong>Nome:</strong> <span id="c_nome"></span></li>
        <li><strong>Endereço:</strong> <span id="c_endereco"></span></li>
        <li><strong>CEP:</strong> <span id="c_cep"></span></li>
        <li><strong>CPF:</strong> <span id="c_cpf"></span></li>
        <li><strong>WhatsApp:</strong> <span id="c_whatsapp"></span></li>
        <li><strong>Data de nascimento:</strong> <span id="c_data"></span></li>
        <li><strong>Plano:</strong> <span id="c_plano"></span></li>
        <li><strong>Objetivos:</strong> <span id="c_objetivos"></span></li>
        <li><strong>Origem:</strong> <span id="c_origem"></span></li>
      </ul>

      <div class="modal-actions">
        <button type="button" class="btn btn-outline" id="btnEditar">Editar</button>
        <button type="button" class="btn" id="btnConfirmar">Confirmar envio</button>
      </div>
    </div>
  </div>

  <!-- JS do formulário -->
  <script src="/painel/js/matriculas.js" defer></script>
</body>
</html>
