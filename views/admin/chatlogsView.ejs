<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard • Tema Dark Vermelho</title>
  <link rel="stylesheet" href="/css/admin/adminStyles.css" />
  <script src="/js/admin/adminScripts.js" defer></script>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <%- include('./partials/sidebarPartialView') %>

    <!-- Main -->
    <main class="main">
      <!-- Topbar -->
      <%- include('./partials/topbarPartialView') %>

      <section class="container">
        <!-- Page header -->
        <div class="page-head">
          <div>
            <h1 class="h1">Visão Geral</h1>
            <p class="muted">Resumo do desempenho nas últimas 24h</p>
          </div>
          <div class="actions">
            <button class="btn btn--primary">Novo Relatório</button>
            <button class="btn btn--outline">Exportar</button>
          </div>
        </div>

        <!-- KPI cards -->
        <div class="grid grid--4">
          <article class="card kpi">
            <div class="card__head">
              <span class="muted">Mensagens</span>
              <span class="badge badge--success">+8.4%</span>
            </div>
            <div class="kpi__value">6.124</div>
          </article>

          <article class="card kpi">
            <div class="card__head">
              <span class="muted">Contatos</span>
              <span class="badge badge--warning">-3.2%</span>
            </div>
            <div class="kpi__value">135</div>
          </article>

          <article class="card kpi">
            <div class="card__head">
              <span class="muted">Atendimentos</span>
              <span class="badge badge--neutral">2.1%</span>
            </div>
            <div class="kpi__value">1.965</div>
          </article>

          <article class="card kpi">
            <div class="card__head">
              <span class="muted">Matrículas</span>
              <span class="badge badge--success">+412</span>
            </div>
            <div class="kpi__value">92</div>
          </article>
        </div>

        <!-- Content split -->
        <div class="grid grid--1">
          <article class="card">
            <div class="card__title">Mensagens recebidas no mês</div>
            <div class="card__sub">Distribuição diária</div>
            <div class="chart">
              <canvas id="messagesChart" height="258"></canvas>
            </div>
            <div class="legend">
              <span class="legend__item"><span class="dot"></span> Mensagens</span>
            </div>
          </article>
        </div>

        <!-- Table -->
        <article class="card">
          <div class="card__title">Últimos atendimentos</div>
          <div class="table table--responsive">
            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Assunto</th>
                  <th>Contato</th>
                  <th>Data</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#10021</td>
                  <td>Plano Mensal</td>
                  <td>Lucas Silva</td>
                  <td>01/08/2025</td>
                  <td>
                    <button class="btn btn--xs btn--outline">Ver conversa</button>
                  </td>
                </tr>
                <tr>
                  <td>#10020</td>
                  <td>Avaliação Física</td>
                  <td>Mariana Costa</td>
                  <td>31/07/2025</td>
                  <td>
                    <button class="btn btn--xs btn--outline">Ver conversa</button>
                  </td>
                </tr>
                <tr>
                  <td>#10019</td>
                  <td>Cancelamento</td>
                  <td>Rafael Souza</td>
                  <td>30/07/2025</td>
                  <td>
                    <button class="btn btn--xs btn--outline">Ver conversa</button>
                  </td>
                </tr>
                <tr>
                  <td>#10018</td>
                  <td>Horários de Aula</td>
                  <td>Ana Paula</td>
                  <td>29/07/2025</td>
                  <td>
                    <button class="btn btn--xs btn--outline">Ver conversa</button>
                  </td>
                </tr>
                <tr>
                  <td>#10017</td>
                  <td>Promoção Anual</td>
                  <td>Felipe Lima</td>
                  <td>28/07/2025</td>
                  <td>
                    <button class="btn btn--xs btn--outline">Ver conversa</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>

     

      </section>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Mockup de dados para 30 dias do mês
    const days = Array.from({length: 30}, (_, i) => (i + 1).toString().padStart(2, '0'));
    const messages = [
      120, 98, 110, 130, 125, 140, 150, 160, 170, 180,
      175, 160, 155, 150, 145, 140, 135, 130, 125, 120,
      115, 110, 108, 112, 118, 125, 130, 140, 150, 160
    ];

    const ctx = document.getElementById('messagesChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: days,
        datasets: [{
          label: 'Mensagens',
          data: messages,
          backgroundColor: 'rgba(225,29,72,0.7)',
          borderColor: 'rgba(225,29,72,1)',
          borderWidth: 2,
          borderRadius: 6,
          maxBarThickness: 18,
          categoryPercentage: 0.9,
          barPercentage: 0.9,
        }]
      },
      options: {
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#151923',
            titleColor: '#e11d48',
            bodyColor: '#e7e9ee',
            borderColor: 'rgba(225,29,72,0.5)',
            borderWidth: 1,
          }
        },
        scales: {
          x: {
            grid: { display: false },
            ticks: { color: '#e7e9ee', font: { family: "'Inter', 'Segoe UI', Arial, sans-serif" } }
          },
          y: {
            grid: { color: 'rgba(225,29,72,0.08)' },
            ticks: { color: '#e7e9ee', font: { family: "'Inter', 'Segoe UI', Arial, sans-serif" } },
            beginAtZero: true
          }
        }
      }
    });
  </script>
</body>
</html>
